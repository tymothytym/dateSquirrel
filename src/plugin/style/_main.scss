// main scss
// @extend-elements
%labelPosition {
    position: absolute;
    top: 15px;
    right: 30px;
    font-size: 0.9em;
    color: $dsq-medium-grey;
    opacity: 0;
}

// styles
.dsq {
	position: relative;
    min-width: 250px;
    width: 100%;
    box-sizing: border-box;
	label {
    	box-sizing: border-box;
	    >input {
	        width: 100%;
	        box-sizing: border-box;
	    }
	}
    >.dsq-lists {
    	box-sizing: border-box;
        width: 100%;
        background-color: $dsq-white;
        overflow: hidden;
        position: absolute;
        margin-top: -2px;
        left: 0;
        border-bottom-right-radius: 2px;
        border-bottom-left-radius: 2px;
        z-index: 1;
        ul {
            box-sizing: border-box;
            list-style: none;
            li {
                box-sizing: border-box;
                font-size: 14px;
                @media only screen and (min-width: #{$dsq-breakpoint-desktop}) {
                    font-size: $dsq-list-text-size;
                }
	            &.dsq-active {
	                font-weight: 700;
	                color: $dsq-primary;
	            }
	            &:not(.dsq-dow-header):not(.dsq-disabled):not(.dsq-noh) {
                    @media only screen and (min-width: #{$dsq-breakpoint-desktop}) {
    	                &:hover {
    	                    background-color: $dsq-primary;
    	                    color: $dsq-on-primary;
    	                }
    	                &:active {
    	                    background-color: $dsq-primary;
    	                    color: $dsq-on-primary;
    	                }
                    }
	            }
	            &.dsq-disabled {
	            	cursor: not-allowed;
		            color: $dsq-disabled-colour;
		            background-color: $dsq-light-grey;
	            }
	            &.dsq-dow-header {
	            	cursor: default;
	            }
                &:focus,
                &.dsq-focused {
                    background-color: rgba($dsq-primary, 0.25);
                }
	        }
        }
        .dsq-list-years {
            height: $dsq-list-height;
            overflow-y: auto;
            text-align: left;
            width: 100%;
            box-sizing: content-box;
            padding-right: 20px;
            padding: 0;
            margin: 0;
            &:before {
                @extend %labelPosition;
                content: $dsq-indicator-label-text-year;
                opacity: 1;
            }
            li {
                color: $dsq-black;
                font-weight: 400;
                line-height: $dsq-list-row-height;
                margin: 0;
                padding: 0 1em;
                opacity: 1;
                &:focus {
                    outline: none;
                }
            }
        }
        .dsq-list-months {
            overflow-y: auto;
            position: absolute;
            background-color: $dsq-white;
            left: 100%;
            top: 0;
            width: calc(100% - 80px);
            height: $dsq-list-height;
            padding: 0;
            margin: 0;
            &:before {
                @extend %labelPosition;
            }
            li {
                color: $dsq-black;
                line-height: $dsq-list-row-height;
                text-align: left;
                margin: 0;
                padding: 0 1em;
                &:focus {
                    outline: none;
                }
            }
        }
        &.dsq-month {
            .dsq-list-years {
                &:before {
                    content: $dsq-indicator-label-text-month;
                    opacity: 1;
                    z-index: 1;
                }
                li:not(.dsq-active) {
                    opacity: 0.4;
                }
            }
            &.dsq-day {
                .dsq-list-months:before {
                    opacity: 0;
                }
                .dsq-list-years:before {
                    content: "";
                    opacity: 0;
                }
            }
        }

        .dsq-days {
            position: absolute;
            padding: 0 5px;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
            background-color: $dsq-white;
            @media only screen and (min-width: #{$dsq-breakpoint-desktop}) {
                display: flex;
            	padding: 0 3px 0 0;
            }
            .dsq-side {
                @media only screen and (min-width: #{$dsq-breakpoint-desktop}) {
                    flex: 0 0 20%;
                    background-color: $dsq-primary;
                    align-items: center;
                    justify-content: center;
                    display: flex;
                    border-right: 3px solid $dsq-white;
                }
                .dsq-reminder {
                    width: 100%;
                    line-height: calc(#{$dsq-list-row-height} - 2px);
                    text-align: center;
                    margin: 0;
                    padding: 0;
                    @media only screen and (min-width: #{$dsq-breakpoint-desktop}) {
                        a:not(.dsq-noh):hover {
                            color: $dsq-primary;
                            text-decoration: underline;
                        }
                    }
                    a:not(.dsq-noh):focus {
                        text-decoration: underline;
                    }
                    .dsq-reminder-month {
                        font-size: $dsq-reminder-month-text-size;
                        color: $dsq-very-grey;
                    }
                    .dsq-reminder-year {
                        font-size: $dsq-reminder-year-text-size;
                        font-weight: 700;
                        color: $dsq-dark-grey;
                    }
                    @media only screen and (min-width: #{$dsq-breakpoint-desktop}) {
                        line-height: 1em;
                        .dsq-reminder-month,
                        .dsq-reminder-year {
                            color: $dsq-on-primary;
                            font-size: 200%;
                            display: block;
                        }
                        a:not(.dsq-noh):hover {
                            color: $dsq-on-primary;
                            cursor: pointer;
                        }
                    }
                }
            }	        
            .dsq-list-days {
	            padding: 0;
	            margin: 0;
	            display: flex;
	            flex-wrap: wrap;
	            align-items: flex-start;
	            justify-content: flex-start;
	            li {
	                flex: 0 0 14.28%;
	                line-height: $dsq-list-row-height;
	                border-radius: 2px;
	                text-align: center;
	                margin: 0;
	                color: $dsq-black;
	                &:focus {
	                    outline: none;
	                }
	                &.dsq-dow-header {
	                    font-size: 11px;
	                    color: $dsq-dark-grey;
	                    margin: 0;
	                    line-height: 16px;
	                    @media only screen and (min-width: #{$dsq-breakpoint-desktop}) {
	                        line-height: $dsq-list-row-height;
	                    }
	                }
	                &.dsq-today:before {
	                    content: $dsq-indicator-label-text-today;
	                    font-size: 65%;
	                    letter-spacing: 2px;
	                    color: $dsq-medium-grey;
	                    display: block;
	                    height: 0;
	                    transform: translateY(-13px);
	                }
	            }
	            @media only screen and (min-width: #{$dsq-breakpoint-desktop}) {
	                flex: 0 0 80%;
	                padding: 10px 7px;
	            }
        	}
        }
        &.dsq-up {
        	bottom: 0;
		    top: initial;
        }
        &.dsq-down {
            bottom: initial;
            top: 0;
        }
    }
    &.dsq-active {
    	.dsq-lists {
	        box-shadow: $dsq-lists-boxshadow;
	        border-radius: 2px;
	        .dsq-list-months {
	            overflow-y: hidden;
	        }
	        &.dsq-month {
	            .dsq-list-months {
	                opacity: 1;
	                transform: translateX(-100%);
	                animation: slideFadeIn 225ms forwards;
	                overflow-y: auto;
	            }
	            &.dsq-days {
	                .dsq-list-years {
	                    overflow-y: hidden;
	                }
	                .dsq-list-months {
	                    overflow-y: hidden;
	                }
	            }
	        }
	    }
    }
    &.dsq-done {
        .dsq-list-years {
        	transition: none;
        }
        .dsq-list-months {
        	transition: none;
        }
    }
}

// animations
// month slide & fade
@keyframes slideFadeIn {
  0% {
    opacity: 0;
    transform: translateX(0);
  }
  10% {
    opacity: 0.5;
    transform: translateX(-85%);
  }
  85% {
    opacity: 1;
  }
  100% {
    opacity: 1;
    transform: translateX(-100%);
  }
}
@keyframes slideFadeOut {
  0% {
    opacity: 1;
    transform: translateX(-100%);
  }
  100% {
    opacity: 0;
    transform: translateX(-65%);
  }
}
@keyframes switchOut {
	0%, 100% {
	    color: #c5c5c5;
	    text-shadow: 0;
  	}
 	50% {
    	color: transparent;
    	text-shadow: 0 0 5px rgba(100,100,100,.5);
    }
}
.dsq .dsq-lists {
  	transition: max-height 200ms $dsq-ease-in-out, top 200ms $dsq-ease-in-out;
  	max-height: 0;
  	overflow: hidden;
  	top: 50px;
    > .dsq-list-years {
        pointer-events: none;
    }
	> .dsq-list-months {
        pointer-events: none;
	}
    > .dsq-days {
        pointer-events: none;
        transform: translateY(300px);
    }
}
.dsq-closing .dsq-lists {
  	transition: max-height 200ms $dsq-ease-in-out,  top 200ms $dsq-ease-in-out;
  	overflow: hidden;
  	top: 50px;
  	>ul > li {
  		pointer-events: none;
  	}
	> .dsq-days {
        pointer-events: none;
        transform: translateY(0);
	}
}
.dsq-active .dsq-lists {
	max-height: 400px;
	top: -50px;
  	transition: max-height 250ms $dsq-snap-out,  top 200ms $dsq-ease-in-out, height 200ms $dsq-ease-in-out;
	> .dsq-list-years,
	> .dsq-list-months,
	> .dsq-days {
        pointer-events: auto;
	}
	&.dsq-month {
		.dsq-list-months.dsq-switch {
			>li {
	        	animation: switchOut 300ms;
  				transition: color 250ms $dsq-ease-in-out, background-color 250ms $dsq-ease-in-out;
	        }
	    }
        .dsq-list-months {
            animation: slideFadeIn 225ms forwards;
	        &.dsq-sout {
		        animation: slideFadeOut 150ms forwards;
	        }
        }
        &.dsq-day .dsq-days {
            transform: translateY(0);
        	transition: transform 200ms $dsq-snap-out;
        }
        &.dsq-day .dsq-days.dsq-sout {
            transform: translateY(300px);
        	transition: transform 150ms $dsq-ease;
        }
    }
}

